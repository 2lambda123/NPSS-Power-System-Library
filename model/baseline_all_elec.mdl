/***
 -------------------------------------------------------------------------------
 |                                                                             |
 | NASA Glenn Research Center                                                  |
 | 21000 Brookpark Rd 		                                                     |
 | Cleveland, OH 44135 	                                                       |
 |                                                                             |
 | File Name:     baseline_all_elec.mdl                                        |
 | Author(s):	    Jonathan Fuzaro Alencar       			                         |
 | Date(s):       February 2020                                                |
 |                                                                             |
 | Description:   Example model of DC source to DC-DC converter to power load. |
 |                                                                             |
 -------------------------------------------------------------------------------
***/

#define THERMO GasTbl
setThermoPackage("$THERMO");

ElectricAssembly allElectric {
  Element Source Source {
    setOption("ElectricPowerType", "DC");
    Vreal  = 1000; // [volts]
    Vimag  = 0;    // [volts]
    effDes = 0.99; // [99 %]
  }

  Element Cable A1 {
    length = 1; // [meter]
  }

  Element DC_DC_Converter Converter {
    // #include <InverterRectifierMap.int>
    Voltage       = 1000; // [volts]
    K             = 2.0;  // voltage ratio (V_in * K = V_out)
    effDes        = 0.93; // [93 %]
    SpecificPower = 9;    // [kW / kg]
  }

  Element Cable A2 {
    length = 1; // [meter]
  }

  Element ConstantPowerLoad Load {
    Vreal    = 2000; // [volts]
    Vimag    = 0;    // [volts]
    Pdemand  = 10;   // [kilowatts]
    pfDemand = 1;
  }

  // Source -> A1 (cable) -> Converter -> A2 (cable) -> Load
  linkPortI("Source.EP_O", "A1.EP_I");        // Source -> A1 (cable)
  linkPortI("A1.EP_O", "Converter.EP_I"); // A1 (cable) -> Converter
  linkPortI("Converter.EP_O", "A2.EP_I");  // Converter -> A2 (cable)
  linkPortI("A2.EP_O", "Load.EP_I");      // A2 (cable) -> Load
  Source.EP_O.propagatePower();

  solverSequence = {
      "A1", "A2",                   // Power transmission components
      "Converter", "Source", "Load" // Power components
  };
}