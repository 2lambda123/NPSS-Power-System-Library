//-------------------------------------------------------------------------------------------------
//
//   File Name:     cable_test.mdl
//   Date(s):       February 1, 2019
//   Author:        Jeffrey Csank, David Sadey, Tom Lavelle
//					NASA Glenn Research Center
//
//   Description:   Run the cable element on- and off-design.
//
//-------------------------------------------------------------------------------------------------


class Source extends Element{
  ElectricOutputPort EP_O;
  ElectricInputPort EP_I;
}

real defaultFrequency = 400.;

Source ACS{
  void prePass(){
    //EP_O.setIVRMS( 0, 0., 15., 8.66025403784438); // This is the VLL representation of VLN = 10+j0
    EP_O.setIVRMS( 0, 0., 2000., 0.);
    EP_I.setIVRMS( 0, 0., 1990, 0. );
  }
}
Element Cable ACCable {
	length=28.3464; 	
}
ACS.EP_O.setOption("ElectricPowerType","AC3");
ACS.EP_I.setOption("ElectricPowerType","AC3");
ACCable.EP_O.setOption("ElectricPowerType","AC3");
ACCable.EP_I.setOption("ElectricPowerType","AC3");


Source DCS{
  void postexecute(){
    EP_O.setIVRMS( 0, 0., 2000., 0.);
    EP_I.setIVRMS( 0, 0., 1990, 0. );
  }
}
Element Cable DCCable {
	length=28.3464; 	
}
DCS.EP_O.setOption("ElectricPowerType","DC");
DCS.EP_I.setOption("ElectricPowerType","DC");
DCCable.EP_O.setOption("ElectricPowerType","DC");
DCCable.EP_I.setOption("ElectricPowerType","DC");

//--------------------------------------------------------
// link it up
//--------------------------------------------------------

// linkEports( "ACS.EP_O", "ACCable.EP_I", "PORT" );
// linkEports( "ACCable.EP_O", "ACS.EP_I", "NODE" );
// linkEports( "DCS.EP_O", "DCCable.EP_I", "PORT" );
// linkEports( "DCCable.EP_O", "DCS.EP_I", "NODE" );

linkPortI( "ACS.EP_O", "ACCable.EP_I" );
linkPortI( "ACCable.EP_O", "ACS.EP_I" );
linkPortI( "DCS.EP_O", "DCCable.EP_I" );
linkPortI( "DCCable.EP_O", "DCS.EP_I" );


