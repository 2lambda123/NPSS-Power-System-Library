
// Heat Exchanger AU map, based on a fuel (flow 1) to water (flow 2) heat transfer.

Table TB_AU(real W1, real W2) {
 W1 = 0.40{
  W2 = {0.40 , 1.86 , 3.32 , 4.78 , 6.24 , 7.70 , 9.16 , 10.62 , 12.08 , 13.54 , 15.00 }
   AU = {0.761 , 2.265 , 3.085 , 3.618 , 3.996 , 4.280 , 4.502 , 4.680 , 4.827 , 4.950 , 5.055 }
 }
 W1 = 2.36{
  W2 = *;
   AU = {0.840 , 3.146 , 4.987 , 6.546 , 7.897 , 9.088 , 10.149 , 11.103 , 11.966 , 12.753 , 13.473 }
 }
 W1 = 4.31{
  W2 = *;
   AU = {0.850 , 3.281 , 5.334 , 7.156 , 8.803 , 10.308 , 11.695 , 12.980 , 14.176 , 15.294 , 16.341 }
 }
 W1 = 6.27{
  W2 = *;
   AU = {0.853 , 3.337 , 5.484 , 7.428 , 9.219 , 10.884 , 12.442 , 13.906 , 15.288 , 16.595 , 17.836 }
 }
 W1 = 8.22{
  W2 = *;
   AU = {0.855 , 3.368 , 5.568 , 7.584 , 9.461 , 11.222 , 12.886 , 14.463 , 15.964 , 17.395 , 18.763 }
 }
 W1 = 10.18{
  W2 = *;
   AU = {0.857 , 3.388 , 5.623 , 7.686 , 9.619 , 11.446 , 13.182 , 14.837 , 16.421 , 17.940 , 19.398 }
 }
 W1 = 12.13{
  W2 = *;
   AU = {0.858 , 3.402 , 5.661 , 7.758 , 9.732 , 11.606 , 13.395 , 15.107 , 16.752 , 18.336 , 19.862 }
 }
 W1 = 14.09{
  W2 = *;
   AU = {0.858 , 3.412 , 5.690 , 7.811 , 9.817 , 11.727 , 13.555 , 15.312 , 17.004 , 18.637 , 20.217 }
 }
 W1 = 16.04{
  W2 = *;
   AU = {0.859 , 3.420 , 5.712 , 7.853 , 9.882 , 11.820 , 13.680 , 15.472 , 17.202 , 18.875 , 20.497 }
 }
 W1 = 18.00{
  W2 = *;
   AU = {0.859 , 3.426 , 5.729 , 7.886 , 9.935 , 11.896 , 13.781 , 15.601 , 17.362 , 19.068 , 20.725 }
 }
}

class ThermalEff extends Subelement {
  real term;
  void calculate() {
    AU = TB_AU(Fl_O1.W, Fl_O2.W);
    NTU = AU/capMin;
    term = (1/CR) * NTU**0.22 * (exp(-CR * NTU**0.78)-1);
    effect_dmd = 1 - exp(term);
  }
}
